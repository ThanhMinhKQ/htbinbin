<!DOCTYPE html>
<html lang="vi" class="h-full">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ƒêƒÉng Nh·∫≠p - Bin Bin Hotel T·∫øt 2026</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;600;700&display=swap" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Playfair+Display:wght@700;900&display=swap"
    rel="stylesheet">

  <script>
    /* T√¨m ƒëo·∫°n tailwind.config trong th·∫ª <head> v√† B·ªî SUNG ƒëo·∫°n c√≥ comment b√™n d∆∞·ªõi */
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Quicksand', 'sans-serif'] },
          colors: {
            tet: { red: '#D90429', gold: '#FFD60A', dark: '#020617' }
          },
          animation: {
            'fade-in-up': 'fadeInUp 0.8s ease-out forwards',
            'float-slow': 'float 6s ease-in-out infinite',
            'pulse-slow': 'pulse 3s infinite',

            // --- TH√äM D√íNG N√ÄY (ƒê·ªãnh nghƒ©a t√™n animation) ---
            'breath': 'breathing 5s ease-in-out infinite',
            'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
          },
          keyframes: {
            shake: {
              '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
              '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
              '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
              '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
            },
            fadeInUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-15px)' },
            },

            // --- TH√äM ƒêO·∫†N N√ÄY (ƒê·ªãnh nghƒ©a chuy·ªÉn ƒë·ªông) ---
            breathing: {
              '0%, 100%': { transform: 'scale(1)' },   // Tr·∫°ng th√°i b√¨nh th∆∞·ªùng
              '50%': { transform: 'scale(1.05)' },     // H√≠t v√†o (Ph√≥ng to 5%)
            }
          }
        }
      }
    }
  </script>

  <style>
    /* N·ªÅn Gradient m∆∞·ª£t m√† */
    body {
      transition: background 0.5s ease;
      /* ƒê√£ x√≥a d√≤ng background gradient c≈© ƒëi ƒë·ªÉ hi·ªán ·∫£nh */
      background-color: #1e1b4b;
      /* M√†u n·ªÅn d·ª± ph√≤ng khi ·∫£nh ch∆∞a load */
    }

    .slide-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      /* Gi√∫p ·∫£nh lu√¥n full m√†n h√¨nh kh√¥ng b·ªã m√©o */
      opacity: 0;
      transition: opacity 1.5s ease-in-out, transform 10s ease;
      /* Fade 1.5s, Zoom nh·∫π 10s */
      transform: scale(1);
    }

    .slide-image.active {
      opacity: 1;
      transform: scale(1.05);
      /* Hi·ªáu ·ª©ng zoom nh·∫π khi ·∫£nh hi·ªán ra */
    }

    html.dark body {
      background: radial-gradient(circle at center, #1e1b4b, #020617);
    }

    html:not(.dark) body {
      background: radial-gradient(circle at center, #fffbeb, #fef2f2);
    }

    /* Hi·ªáu ·ª©ng Glassmorphism cao c·∫•p */
    .glass-panel {
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
    }

    .dark .glass-panel {
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    }

    /* Input Styling ƒë·ªÉ tr√°nh c·∫Øt ch·ªØ ti·∫øng Vi·ªát */
    input {
      line-height: 1.5;
    }

    /* Animation cho hi·ªáu ·ª©ng n·ªÅn (Mai & ƒê√®n l·ªìng) */
    .particle {
      position: absolute;
      pointer-events: none;
      transition: all 0.3s ease;
    }

    /* Hoa mai r∆°i (Light mode) */
    @keyframes fall {
      0% {
        transform: translateY(-10vh) rotate(0deg);
        opacity: 0;
      }

      10% {
        opacity: 1;
      }

      100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
      }
    }

    .flower {
      width: 20px;
      height: 20px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFD60A'%3E%3Cpath d='M12 2L14.5 9H22L16 13.5L18.5 21L12 16.5L5.5 21L8 13.5L2 9H9.5L12 2Z'/%3E%3C/svg%3E");
      background-size: contain;
      animation: fall linear infinite;
    }

    /* ƒê√®n l·ªìng bay l√™n (Dark mode) */
    @keyframes rise {
      0% {
        transform: translateY(110vh) scale(0.8);
        opacity: 0;
      }

      10% {
        opacity: 0.8;
      }

      100% {
        transform: translateY(-10vh) scale(1);
        opacity: 0;
      }
    }

    .lantern {
      width: 24px;
      height: 30px;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23D90429'%3E%3Cpath d='M12 2C16.4183 2 20 5.58172 20 10V18C20 18.5523 19.5523 19 19 19H5C4.44772 19 4 18.5523 4 18V10C4 5.58172 7.58172 2 12 2Z'/%3E%3Crect x='8' y='19' width='8' height='3' fill='%23FFD60A'/%3E%3C/svg%3E");
      background-size: contain;
      animation: rise linear infinite;
      filter: drop-shadow(0 0 5px #D90429);
    }
  </style>
</head>

<body
  class="h-full w-full overflow-hidden text-slate-800 dark:text-slate-100 selection:bg-tet-red selection:text-white relative">
  <!-- Static Background (Visible on Mobile & while Video loads) -->
  <div class="fixed inset-0 z-[-2]">
    <img src="../static/view_hotel/anhduphong.jpg" class="w-full h-full object-cover" alt="Background">
  </div>

  <!-- Video Background (Desktop Only - Lazy Load) -->
  <video muted loop playsinline id="bg-video"
    class="fixed inset-0 w-full h-full object-cover z-[-1] opacity-0 transition-opacity duration-1000 hidden md:block">
  </video>

  <div class="fixed inset-0 z-[-1] bg-black/10 pointer-events-none transition-colors duration-500 dark:bg-black/40">
  </div>

  <div id="bg-effects" class="absolute inset-0 z-0 overflow-hidden pointer-events-none"></div>

  <div id="bg-effects" class="absolute inset-0 z-0 overflow-hidden pointer-events-none"></div>

  <audio id="bg-music" loop>
    <source src="../static/sounds/Tet.mp3" type="audio/mpeg">
  </audio>

  <div class="relative z-10 w-full h-full flex flex-col md:grid md:grid-cols-5">

    <button id="btn-music"
      class="absolute top-5 left-5 p-2.5 rounded-full bg-white/20 hover:bg-white/40 backdrop-blur-sm transition-all shadow-sm group z-20">
      <i id="music-icon" class="ph ph-speaker-slash text-white text-xl transition-transform group-hover:scale-110"></i>
    </button>

    <!-- LEFT: Empty to show video -->
    <div class="hidden md:flex md:col-span-3 h-full items-center justify-center">
    </div>

    <!-- RIGHT: Login Form -->
    <div class="col-span-1 md:col-span-2 flex items-center justify-center p-6 w-full h-full">
      <div
        class="glass-panel w-full max-w-[400px] p-8 rounded-3xl animate-fade-in-up shadow-2xl relative transition-all duration-300 backdrop-blur-xl bg-white/70 dark:bg-slate-900/70 border-white/40">

        <button id="btn-theme"
          class="absolute top-5 right-5 p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors group">
          <i class="ph ph-sun text-orange-600 text-lg hidden dark:block group-hover:rotate-90 transition-transform"></i>
          <i
            class="ph ph-moon text-slate-600 text-lg block dark:hidden group-hover:-rotate-12 transition-transform"></i>
        </button>

        <div class="text-center mb-6">
          <!-- Logo size adjusted -->
          <img src="/static/logo.png" class="h-12 mx-auto mb-3 drop-shadow-sm object-contain" alt="Logo Bin Bin" />
          <h2 class="text-xl font-bold text-slate-800 dark:text-white uppercase tracking-wide mb-4">ƒêƒÉng Nh·∫≠p</h2>

          <!-- Compact Countdown inside Form -->
          <div id="tet-countdown"
            class="grid grid-cols-4 gap-2 border-t border-b border-slate-200 dark:border-slate-600/50 py-3 mx-2">
            <div class="flex flex-col items-center">
              <span id="days" class="text-xl font-bold text-tet-red dark:text-white font-['Playfair_Display']">00</span>
              <span class="text-[8px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Ng√†y</span>
            </div>
            <div class="flex flex-col items-center border-l border-slate-200 dark:border-slate-700">
              <span id="hours"
                class="text-xl font-bold text-slate-800 dark:text-white font-['Playfair_Display']">00</span>
              <span class="text-[8px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Gi·ªù</span>
            </div>
            <div class="flex flex-col items-center border-l border-slate-200 dark:border-slate-700">
              <span id="minutes"
                class="text-xl font-bold text-slate-800 dark:text-white font-['Playfair_Display']">00</span>
              <span class="text-[8px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Ph√∫t</span>
            </div>
            <div class="flex flex-col items-center border-l border-slate-200 dark:border-slate-700">
              <span id="seconds"
                class="text-xl font-bold text-tet-gold font-['Playfair_Display'] tabular-nums">00</span>
              <span class="text-[8px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Gi√¢y</span>
            </div>
          </div>
        </div>

        <!-- Error Notification -->
        {% if error and error|trim|length > 0 %}
        <div
          class="mb-5 p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-tet-red/30 flex items-center gap-3 animate-shake">
          <div
            class="w-8 h-8 rounded-full bg-red-100 dark:bg-red-800/50 text-tet-red flex items-center justify-center shrink-0">
            <i class="ph ph-warning-circle text-xl"></i>
          </div>
          <div class="text-left">
            <p class="text-xs font-bold text-tet-red uppercase tracking-wider mb-0.5">ƒêƒÉng nh·∫≠p th·∫•t b·∫°i</p>
            <p class="text-sm font-semibold text-slate-700 dark:text-slate-200">{{ error }}</p>
          </div>
        </div>
        {% endif %}

        <form method="post" action="/login" class="space-y-4" id="loginForm">

          <div class="group">
            <div class="relative">
              <span class="absolute left-4 top-3.5 text-slate-500 group-focus-within:text-tet-red transition-colors">
                <i class="ph ph-user text-lg"></i>
              </span>
              <input type="text" name="username"
                class="w-full py-3 pl-11 pr-4 rounded-xl border-0 bg-white/80 dark:bg-black/40 text-slate-800 dark:text-white placeholder:text-slate-400 focus:ring-2 focus:ring-tet-red/50 transition-all shadow-inner font-medium text-sm"
                placeholder="M√£ nh√¢n vi√™n" required />
            </div>
          </div>

          <div class="group">
            <div class="relative">
              <span class="absolute left-4 top-3.5 text-slate-500 group-focus-within:text-tet-red transition-colors">
                <i class="ph ph-lock-key text-lg"></i>
              </span>
              <input type="password" id="passwordInput" name="password"
                class="w-full py-3 pl-11 pr-11 rounded-xl border-0 bg-white/80 dark:bg-black/40 text-slate-800 dark:text-white placeholder:text-slate-400 focus:ring-2 focus:ring-tet-red/50 transition-all shadow-inner font-medium text-sm"
                placeholder="M·∫≠t kh·∫©u" required />

              <button type="button" id="togglePassword"
                class="absolute right-3 top-3.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 focus:outline-none">
                <i class="ph ph-eye-slash text-lg" id="eyeIcon"></i>
              </button>
            </div>
          </div>

          <div class="flex justify-end">
            <button type="button" onclick="showForgotPass()"
              class="text-[11px] font-semibold text-slate-600 hover:text-tet-red dark:text-slate-300 dark:hover:text-tet-gold transition-colors">
              Qu√™n m·∫≠t kh·∫©u?
            </button>
          </div>

          <button type="submit"
            class="w-full py-3 rounded-xl bg-gradient-to-r from-tet-red to-[#b91c1c] text-white font-bold text-base hover:shadow-lg hover:shadow-tet-red/30 hover:-translate-y-0.5 active:translate-y-0 active:scale-[0.98] transition-all duration-200">
            ƒêƒÉng Nh·∫≠p
          </button>
        </form>

        <p class="mt-6 text-[10px] text-center text-slate-500 dark:text-slate-400 font-medium opacity-80">
          ¬© 2026 Bin Bin Hotel System
        </p>
      </div>
    </div>

  </div>

  <script>
    // --- 1. Logic Dark/Light Mode & Hi·ªáu ·ª©ng n·ªÅn ---
    const html = document.documentElement;
    const bgContainer = document.getElementById('bg-effects');
    let effectInterval;

    // H√†m t·∫°o v·∫≠t th·ªÉ bay (Hoa ho·∫∑c ƒê√®n l·ªìng)
    function createParticle(type) {
      const el = document.createElement('div');
      // Random v·ªã tr√≠ b·∫Øt ƒë·∫ßu theo chi·ªÅu ngang
      const startX = Math.random() * 100;
      // Random k√≠ch th∆∞·ªõc
      const scale = 0.5 + Math.random() * 0.8;
      // Random th·ªùi gian bay
      const duration = (type === 'flower' ? 5 : 8) + Math.random() * 5;

      el.classList.add('particle');
      el.classList.add(type);
      el.style.left = `${startX}%`;
      el.style.animationDuration = `${duration}s`;
      el.style.transform = `scale(${scale})`;

      bgContainer.appendChild(el);

      // T·ª± ƒë·ªông x√≥a sau khi animation k·∫øt th√∫c ƒë·ªÉ nh·∫π m√°y
      setTimeout(() => {
        el.remove();
      }, duration * 1000);
    }

    function startEffects(isDark) {
      // X√≥a hi·ªáu ·ª©ng c≈©
      clearInterval(effectInterval);
      bgContainer.innerHTML = '';

      const particleType = isDark ? 'lantern' : 'flower';
      const density = 800; // mili-gi√¢y t·∫°o ra 1 v·∫≠t th·ªÉ

      effectInterval = setInterval(() => {
        createParticle(particleType);
      }, density);
    }

    // Toggle Theme
    document.getElementById('btn-theme').onclick = () => {
      html.classList.toggle('dark');
      const isDark = html.classList.contains('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      startEffects(isDark);
    };

    // Kh·ªüi ch·∫°y l·∫ßn ƒë·∫ßu
    const savedTheme = localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
    if (savedTheme) html.classList.add('dark');
    startEffects(html.classList.contains('dark'));


    // --- 2. Logic Hi·ªÉn th·ªã/·∫®n m·∫≠t kh·∫©u ---
    const togglePassBtn = document.getElementById('togglePassword');
    const passInput = document.getElementById('passwordInput');
    const eyeIcon = document.getElementById('eyeIcon');

    togglePassBtn.onclick = () => {
      const type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passInput.setAttribute('type', type);

      // ƒê·ªïi icon
      if (type === 'text') {
        eyeIcon.classList.replace('ph-eye-slash', 'ph-eye');
        eyeIcon.classList.add('text-tet-red');
      } else {
        eyeIcon.classList.replace('ph-eye', 'ph-eye-slash');
        eyeIcon.classList.remove('text-tet-red');
      }
    };


    // --- 3. Logic Qu√™n m·∫≠t kh·∫©u ---
    window.showForgotPass = () => {
      // D√πng SweetAlert ho·∫∑c Alert m·∫∑c ƒë·ªãnh (ƒë√£ style cho ƒë·∫πp)
      // ·ªû ƒë√¢y d√πng confirm m·∫∑c ƒë·ªãnh ƒë·ªÉ ƒë∆°n gi·∫£n nh∆∞ng n·ªôi dung r√µ r√†ng
      alert("üîí C·∫§P L·∫†I M·∫¨T KH·∫®U\n\nVui l√≤ng li√™n h·ªá tr·ª±c ti·∫øp qu·∫£n l√Ω ƒë·ªÉ x√°c minh danh t√≠nh v√† c·∫•p l·∫°i m·∫≠t kh·∫©u m·ªõi.\n\nüìû Hotline h·ªó tr·ª£: 0559 913 929");
    };


    // --- 4. Logic √Çm thanh n·ªÅn (N√¢ng cao) ---
    const audio = document.getElementById('bg-music');
    const btnMusic = document.getElementById('btn-music');
    const musicIcon = document.getElementById('music-icon');
    let isPlaying = false;

    // H√†m chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i icon
    function updateMusicIcon(play) {
      if (play) {
        musicIcon.classList.replace('ph-speaker-slash', 'ph-speaker-high');
        musicIcon.classList.add('text-tet-red'); // ƒê·ªïi m√†u ƒë·ªè cho n·ªïi
        musicIcon.classList.add('animate-pulse'); // Hi·ªáu ·ª©ng nh·ªãp ƒëi·ªáu
      } else {
        musicIcon.classList.replace('ph-speaker-high', 'ph-speaker-slash');
        musicIcon.classList.remove('text-tet-red');
        musicIcon.classList.remove('animate-pulse');
      }
    }

    // X·ª≠ l√Ω khi b·∫•m n√∫t Loa
    btnMusic.onclick = () => {
      if (isPlaying) {
        audio.pause();
      } else {
        audio.volume = 0.5; // √Çm l∆∞·ª£ng 50%
        audio.play();
      }
      isPlaying = !isPlaying;
      updateMusicIcon(isPlaying);
    };

    // T·ª± ƒë·ªông ph√°t nh·∫°c khi ng∆∞·ªùi d√πng click b·∫•t k·ª≥ ƒë√¢u l·∫ßn ƒë·∫ßu ti√™n
    // (ƒê√¢y l√† c√°ch "l√°ch" lu·∫≠t ch·∫∑n autoplay c·ªßa tr√¨nh duy·ªát)
    function autoPlayOnFirstInteraction() {
      if (!isPlaying) {
        audio.volume = 0.5;
        audio.play().then(() => {
          isPlaying = true;
          updateMusicIcon(true);
        }).catch(error => {
          console.log("Ch·ªù ng∆∞·ªùi d√πng t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c...");
        });
      }
      // Ch·ªâ ch·∫°y 1 l·∫ßn r·ªìi x√≥a s·ª± ki·ªán ƒëi cho nh·∫π web
      document.removeEventListener('click', autoPlayOnFirstInteraction);
      document.removeEventListener('keydown', autoPlayOnFirstInteraction);
    }

    // L·∫Øng nghe c√∫ click ho·∫∑c g√µ ph√≠m ƒë·∫ßu ti√™n
    document.addEventListener('click', autoPlayOnFirstInteraction);
    document.addEventListener('keydown', autoPlayOnFirstInteraction);
  </script>


  <script>
    // --- 6. Logic ƒê·∫øm ng∆∞·ª£c ƒë·∫øn T·∫øt B√≠nh Ng·ªç (17/02/2026) ---
    function startTetCountdown() {
      // Ng√†y ƒë√≠ch: 17 th√°ng 2 nƒÉm 2026 l√∫c 00:00:00
      const tetDate = new Date("February 17, 2026 00:00:00").getTime();

      const updateTimer = setInterval(() => {
        const now = new Date().getTime();
        const distance = tetDate - now;

        // T√≠nh to√°n th·ªùi gian
        const d = Math.floor(distance / (1000 * 60 * 60 * 24));
        const h = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const s = Math.floor((distance % (1000 * 60)) / 1000);

        // Hi·ªÉn th·ªã ra m√†n h√¨nh (th√™m s·ªë 0 n·∫øu < 10)
        document.getElementById("days").innerText = d < 10 ? "0" + d : d;
        document.getElementById("hours").innerText = h < 10 ? "0" + h : h;
        document.getElementById("minutes").innerText = m < 10 ? "0" + m : m;
        document.getElementById("seconds").innerText = s < 10 ? "0" + s : s;

        // N·∫øu ƒë√£ qua ng√†y T·∫øt
        if (distance < 0) {
          clearInterval(updateTimer);
          document.getElementById("tet-countdown").innerHTML =
            "<div class='text-2xl font-bold text-tet-gold animate-bounce'>üéÜ CH√öC M·ª™NG NƒÇM M·ªöI! üéÜ</div>";
        }
      }, 1000);
    }

    // OPTIMIZED VIDEO LOADING
    const video = document.getElementById('bg-video');
    // Ch·ªâ t·∫£i video tr√™n m√†n h√¨nh l·ªõn (Tablet/Desktop)
    if (window.matchMedia('(min-width: 768px)').matches && video) {
      video.src = "../static/view_hotel/intro_1.mp4";
      video.load();

      // Khi video s·∫µn s√†ng -> Fade in
      video.oncanplay = () => {
        video.play().catch(e => console.log("Auto-play prevented:", e));
        video.classList.remove('opacity-0');
      };
    }

    // Ch·∫°y h√†m ƒë·∫øm ng∆∞·ª£c
    startTetCountdown();

    // CLEAR ERROR PARAMS FROM URL
    if (window.history.replaceState) {
      const url = new URL(window.location.href);
      if (url.searchParams.has('error')) {
        url.searchParams.delete('error');
        url.searchParams.delete('role');
        window.history.replaceState({}, document.title, url.toString());
      }
    }
  </script>
</body>

</html>
